<!doctype html>
<html>
    <head>
        <meta charset="utf-8"/>
        <title>TSW Test Suite</title>
    </head>
    <body>
        <h1>TSW Test Suite</h1>

        <!--
        Tests
        =====
        1. Core
        - - - -
        1.1 isCompatible
        1.2 context
        1.3 load
        1.4 play
        1.5 
        1.6 Reverse buffer
        
        2. Effects
        - - - - - -
        
        3. Music
        - - - - -

        -->

        <h2>Core</h2>

        <!-- 1.1 isCompatible -->
        <h3>1.1 isCompatible</h3>
        <button name="isCompatible">Check</button>

        <!-- 1.2 context -->
        <h3>1.2 context</h3>
        <button name="context">Check</button>

        <!-- 1.3 load -->
        <div name="load">
            <h3>1.3 load</h3>
            <button name="load">Check</button>
        </div>

        <!-- 1.4 play -->
        <div name="play">
            <h3>1.3 play</h3>
            <button>Check</button>
        </div>

        <!-- 1.5 Connecting nodes --> 
        <div name="connecting-nodes">
            <h3>1.4 Connecting nodes</h3>
            <button>Check</button>
        </div>

        <!-- 1.6 reverse -->
        <div name="reverse">
            <h3>1.6 Reverse</h3>
            <button>Check</button>
        </div>

        <!-- 1.7 createOscillator -->
        <div name="createOscillator">
            <h3>1.7 createOscillator</h3>
            <button>Check</button>
        </div>

        <!-- 1.8 createOscillator -->
        <div name="createNoise">
            <h3>1.8 createNoise</h3>
            <button>Check</button>
        </div>

        <script src="../src/tsw-core.js"></script>
        <script src="../src/tsw-effects.js"></script>
        <script src="../src/tsw-music.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
        <script>
            $(function () {
                // 1.1 Context
                $('#context button').click(function () {
                    console.log(tsw.context);
                });

                // 1.2 Load files
                $('#loading-files button').click(function () {
                    tsw.load({guitar: 'audio/guitar.ogg'}, function (buffers) {
                        console.log('Buffers loaded.', buffers)
                    });
                });

                // 1.3 Play file
                $('#play-file button').click(function () {
                    tsw.load({guitar: 'audio/guitar.ogg'}, function (buffers) {
                        var guitar = buffers.guitar;

                        tsw.connect(guitar, tsw.speakers);
                        tsw.play(guitar);
                    });
                });

                // 1.4 Connecting nodes
                $('#connecting-nodes button').click(function () {
                    var sineWave = tsw.createOscillator();
                    tsw.connect(sineWave, tsw.speakers);
                    console.log('all connected');
                });

                // 1.5 Reverse buffer
                $('#reverse').click(function () {
                    tsw.load({guitar: 'audio/guitar.ogg'}, function (buffers) {
                        var guitar = buffers.guitar,
                            reversedGuitar = tsw.reverse(guitar);

                        tsw.connect(reversedGuitar, tsw.speakers);
                        tsw.play(reversedGuitar);
                    });
                });

                // 1.6 Mute
                $('#mute').click(function () {
                    tsw.mute();
                });

                // 1.7 Sine wave
                $('#sine').click(function () {
                    var tsw = new SoundWorld(),
                        sineWave = tsw.createSineWave(440),
                        compressor = tsw.fx.createCompressor();

                    tsw.connect(sineWave, compressor,  tsw.speakers);
                    sineWave.start(0);
                });

                // 1.8 Noise
                $('#noise').click(function () {
                    var tsw = new SoundWorld(),
                        noise = tsw.createNoise();

                    tsw.connect(noise, tsw.speakers);
                });
            });
        </script>
    </body>
</html>
