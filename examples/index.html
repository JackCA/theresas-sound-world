<!doctype html>
<html>
    <head>
        <meta charset="utf-8"/>
        <title>TSW Test Suite</title>
        <script src="../src/tsw-core.js"></script>
        <script src="../src/tsw-effects.js"></script>
        <script src="../src/tsw-music.js"></script>
        <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    </head>
    <body>
        <h1>TSW Test Suite</h1>
        <h2>Core</h2>

        <h3>Context</h3>
        <pre>
            console.log(tsw.context);
        </pre>
        <button id="context">Context</button>
        <script>
            $('#context').click(function () {
                console.log(tsw.context);
            });
        </script>

        <h3>Load file</h3>
        <pre>
            tsw.load({
                guitar: 'audio/guitar.ogg',
                bass: 'audio/bass.wav'
            }, function (buffers) {
                // buffers are ready to play 
            });
        </pre>
        <button id="load">Load files</button>
        <script>
            $('#load').click(function () {
            var cap1 = tsw.fx.createDelay(0.047),
                r1 = tsw.createGain(0.02),
                cap2 = tsw.fx.createDelay(0.001), 
                tran1 = tsw.createGain(7),
                r2 = tsw.createGain(0.22),
                cap3 = tsw.createGain(0.047),
                r3 = tsw.createGain(0.1);
  
            tsw.connect(cap1, r1);
            tsw.connect(cap1, cap2); 
            tsw.connect(r1,  tran1);

            tsw.connect(r1, r2, cap3);
            tsw.connect(r2, r3);

            tsw.connect(cap3, tsw.speakers);
            tsw.connect(r3, tsw.speakers);

            tsw.connect(tran1, tsw.speakers);

                tsw.load({guitar: 'audio/guitar.ogg'}, function (buffers) {
                    console.log(buffers); 
                    var guitar = buffers.guitar;
                    tsw.connect(guitar, cap1);
                    tsw.play(guitar);
                });
            });
        </script>

        <h3>Play file</h3>
        <pre>
            tsw.load({
                guitar: 'audio/guitar.ogg'
            }, function (buffers) {
                var guitar = buffers.guitar;

                tsw.connect(guitar, tsw.speakers);
                tsw.play(guitar);
            });
        </pre>
        <button id="play">Play</button>
        <script>
            $('#play').click(function () {
                var delay = tsw.fx.createDelay();

                tsw.load({guitar: 'audio/guitar.ogg'}, function (buffers) {
                    var guitar = buffers.guitar;

                    tsw.connect(guitar, delay, tsw.speakers);
                    tsw.play(guitar);
                });
            });
        </script>

        <h3>Connect nodes</h3>
        <pre>
            var sineWave = tsw.createSineWave();

            tsw.connect(sineWave, tsw.speakers);
        </pre>
        <button id="connect">Connect nodes</button>
        <script>
            $('#connect').click(function () {
                var context = new webkitAudioContext(),
                    tsw = new SoundWorld(context),
                    sineWave = tsw.createSineWave();

                tsw.connect(sineWave, tsw.speakers);
                console.log('all connected');
            });
        </script>

        <h3>Reverse</h3>
        <pre>
            var backwardGuitar = tsw.reverse(guitar);
            tsw.play(backwardGuitar);
        </pre>
        <button id="reverse">Reverse</button>
        <script>
            $('#reverse').click(function () {
                tsw.load({guitar: 'audio/guitar.ogg'}, function (buffers) {
                    var guitar = buffers.guitar,
                        reversedGuitar = tsw.reverse(guitar);

                    tsw.connect(reversedGuitar, tsw.speakers);
                    tsw.play(reversedGuitar);
                });
            });
        </script>

        <h3>Mute</h3>
        <pre>
            tsw.mute();
        </pre>
        <script>
            $('#mute').click(function () {
                var tsw = new SoundWorld();
                tsw.mute();
            });
        </script>

        <h2>Sound sources</h2> 
        <h3>Sine Wave</h3>
        <pre>
            var sineWave = tsw.createSineWave(440);
            sineWave.start();
        </pre>
        <button id="sine">Sine wave</button>
        <script>
            $('#sine').click(function () {
                var tsw = new SoundWorld(),
                    sineWave = tsw.createSineWave(440),
                    compressor = tsw.fx.createCompressor();

                tsw.connect(sineWave, compressor,  tsw.speakers);
                sineWave.start(0);
            });
        </script>

        <h3>Noise</h3>
        <pre>
            var whiteNoise = tsw.createNoise();
            tsw.connect(whiteNoise, tsw.speakers);
        </pre>
        <button id="noise">Noise</button>
        <script>
            $('#noise').click(function () {
                var tsw = new SoundWorld(),
                    noise = tsw.createNoise();

                tsw.connect(noise, tsw.speakers);
            });
        </script>
    </body>

</html>
